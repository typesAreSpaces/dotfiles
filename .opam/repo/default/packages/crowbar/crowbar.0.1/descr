write tests, let a fuzzer find failing cases

Crowbar is a library for testing code, combining QuickCheck-style
property-based testing and the magical bug-finding powers of
[afl-fuzz](http://lcamtuf.coredump.cx/afl/).
